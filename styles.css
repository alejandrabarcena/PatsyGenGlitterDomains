const pronouns   = ['the', 'our'];
const adjectives = ['great', 'big', 'super', 'biz', 'magic'];
const nouns      = ['jogger', 'racoon', 'world', 'hub', 'osomagic'];
const extensions = ['.com', '.io', '.es'];

const phrases = [
  'ðŸš€ Este estÃ¡ listo para despegar.',
  'ðŸ’Ž Este dominio brilla mÃ¡s que un NFT en 2021.',
  'ðŸ”¥ Â¡Boom! Startup vibes totales.',
  'ðŸŒˆ Ideal para tu imperio digital arcoÃ­ris.',
  'ðŸ§  Nivel CEO desbloqueado.',
  'ðŸ¾ Patsy dice: lo veo en un cartel en Times Square.',
  'âœ¨ Â¡Marca legendaria detectada!',
  'ðŸ“£ Este se siente viral ya.'
];

function generateAllCombinations(keyword = '') {
  const results = [];
  const useKeyword = keyword ? [keyword.toLowerCase()] : nouns;

  for (const adj of adjectives) {
    for (const noun of useKeyword) {
      for (const ext of extensions) {
        results.push(`${adj}${noun}${ext}`);
      }
    }
  }
  return results;
}

document.addEventListener('DOMContentLoaded', () => {
  const inputField        = document.getElementById('userInput');
  const resultBubble      = document.getElementById('domainResult');
  const sendButton        = document.getElementById('sendBtn');
  const clearButton       = document.getElementById('clearBtn');
  const copyButton        = document.getElementById('copyBtn');
  const downloadButton    = document.getElementById('downloadBtn');

  sendButton.addEventListener('click', () => {
    const keyword = inputField.value.trim();
    const domains = generateAllCombinations(keyword);

    const combined = domains.map((domain, i) => {
      const emojiLine = `âœ¨ ${domain}`;
      const comment = `<span class="comment">${phrases[i % phrases.length]}</span>`;
      return `${emojiLine}${comment}`;
    });

    resultBubble.innerHTML = combined.join('<br>');
    resultBubble.dataset.plaintext = domains.join('\n');
  });

  clearButton.addEventListener('click', () => {
    inputField.value = '';
    resultBubble.innerHTML = '';
    resultBubble.dataset.plaintext = '';
  });

  copyButton.addEventListener('click', () => {
    const text = resultBubble.dataset.plaintext || '';
    if (text) {
      navigator.clipboard.writeText(text)
        .then(() => alert('âœ¨ Dominios copiados al portapapeles'))
        .catch(() => alert('âš ï¸ Error al copiar'));
    } else {
      alert('ðŸ¤·â€â™€ï¸ No hay dominios para copiar');
    }
  });

  downloadButton.addEventListener('click', () => {
    const text = resultBubble.dataset.plaintext || '';
    if (text) {
      const blob = new Blob([text], { type: 'text/plain' });
      const link = document.createElement('a');
      link.download = 'patsy-domains.txt';
      link.href = URL.createObjectURL(blob);
      link.click();
    } else {
      alert('ðŸ“­ Nada que descargar');
    }
  });
});